<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technical Specification — CertNode Standard</title>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist/swagger-ui.css" />
    <style>
        :root {
            --bg: #fafbfc;
            --bg-primary: #1e40af;
            --panel: #ffffff;
            --border: #e1e5e9;
            --border-light: #f1f5f9;
            --text: #1e293b;
            --text-muted: #64748b;
            --text-light: #94a3b8;
            --primary: #1e40af;
            --primary-dark: #1e3a8a;
            --accent: #3b82f6;
            --accent-light: #60a5fa;

            /* Cryptographic Identity Colors */
            --crypto-gold: #f59e0b;
            --security-teal: #0891b2;
            --warning-amber: #d97706;
            --verified-green: #059669;
        }

        body {
            margin: 0;
            font-family: 'Georgia', 'Times New Roman', serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
            letter-spacing: -0.01em;
        }

        header {
            background: var(--panel);
            border-bottom: 1px solid var(--border);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 28px;
            font-weight: 600;
            color: var(--primary);
            text-decoration: none;
            letter-spacing: -0.02em;
        }

        .nav {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .nav a {
            color: var(--text-muted);
            text-decoration: none;
            font-weight: 400;
            font-size: 15px;
            transition: all 0.2s ease;
            position: relative;
        }

        .nav a:hover {
            color: var(--primary);
        }

        .nav a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .nav a:hover::after {
            width: 100%;
        }

        .api-hero {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 100px 0;
            text-align: center;
            position: relative;
        }

        .api-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(30, 41, 59, 0.2);
            pointer-events: none;
        }

        /* Cryptographic Pattern Overlay */
        .api-hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 2px,
                rgba(255,255,255,0.05) 2px,
                rgba(255,255,255,0.05) 4px
            );
            pointer-events: none;
            z-index: 0;
        }

        .api-hero h1 {
            font-size: 48px;
            font-weight: 400;
            margin-bottom: 32px;
            line-height: 1.3;
            letter-spacing: -0.02em;
            position: relative;
            z-index: 1;
        }

        .api-hero p {
            font-size: 22px;
            color: rgba(255, 255, 255, 0.9);
            margin: 0 auto;
            line-height: 1.6;
            font-weight: 300;
            max-width: 700px;
            position: relative;
            z-index: 1;
        }

        #swagger-ui {
            max-width: none;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <a href="/" class="logo">CertNode</a>
            <nav class="nav">
                <a href="/">Home</a>
                <a href="/verify">Validator</a>
                <a href="/pricing">Implementation</a>
                <a href="/openapi" aria-current="page">API</a>
                <a href="/trust">Trust</a>
                <a href="https://github.com/srbryant86/certnode" rel="noopener" target="_blank">GitHub</a>
            </nav>
        </div>
    </header>

    <div class="api-hero">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
            <h1>CertNode Open Standard</h1>
            <p>Universal protocol for tamper-evident digital receipts. RFC-compliant cryptographic standard using JWS detached signatures with ECDSA P-256 and JSON Canonicalization Scheme. Built to become the infrastructure layer for global digital commerce integrity.</p>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
        <div style="border-bottom: 2px solid var(--border); margin-bottom: 2rem;">
            <nav style="display: flex; gap: 0;">
                <button id="tab-overview" style="padding: 1rem 2rem; border: none; background: var(--primary); color: white; cursor: pointer; border-radius: 8px 8px 0 0; font-weight: 600;">
                    ðŸ“‹ Protocol Overview
                </button>
                <button id="tab-api" style="padding: 1rem 2rem; border: none; background: var(--panel); color: var(--text-muted); cursor: pointer; border-radius: 8px 8px 0 0; font-weight: 600; margin-left: 4px;">
                    ðŸ”Œ API Reference
                </button>
            </nav>
        </div>
    </div>

    <!-- Technical Specification Content -->
    <div id="content-overview" style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
        <div style="background: var(--panel); border-radius: 12px; border: 1px solid var(--border); padding: 2rem; margin-bottom: 2rem;">
            <h2 style="color: var(--primary); margin-bottom: 1rem;">The Universal Receipt Standard</h2>
            <p style="margin-bottom: 1rem;">CertNode defines an open, cryptographic standard for creating tamper-evident digital receipts. Like HTTPS for security or JSON for data exchange, CertNode aims to become the universal infrastructure for digital commerce integrity. Every transaction, API call, or digital event can have a mathematically verifiable receipt.</p>

            <div style="background: linear-gradient(135deg, #e7f3ff 0%, #f0f9ff 100%); border-left: 4px solid var(--primary); padding: 1rem; border-radius: 6px; margin: 1.5rem 0;">
                <h4 style="margin: 0 0 0.5rem 0; color: var(--primary);">ðŸŽ¯ Vision: Infrastructure, Not Service</h4>
                <p style="margin: 0; color: var(--text);">CertNode is designed as a protocol standard, not a proprietary service. Like TCP/IP or HTTP, it's meant to be implemented by anyone, anywhere, creating a global ecosystem of interoperable receipt infrastructure.</p>
            </div>

            <h3 style="color: var(--primary); margin: 1.5rem 0 1rem 0;">RFC-Compliant Foundation</h3>
            <ul style="margin-bottom: 1rem;">
                <li><strong>RFC 7515:</strong> JSON Web Signature (JWS) for cryptographic signatures</li>
                <li><strong>RFC 8785:</strong> JSON Canonicalization Scheme (JCS) for consistent hashing</li>
                <li><strong>FIPS 186-4:</strong> ECDSA with P-256 curve for digital signatures</li>
                <li><strong>RFC 7517:</strong> JSON Web Key (JWK) format for public key distribution</li>
            </ul>

            <h3 style="color: var(--primary); margin: 1.5rem 0 1rem 0;">Standard Implementation Requirements</h3>
            <ul style="margin-bottom: 1rem;">
                <li>Generate JWS detached signatures using ECDSA P-256 or EdDSA</li>
                <li>Apply RFC 8785 canonical JSON serialization before signing</li>
                <li>Include payload hash (SHA-256) for tamper detection</li>
                <li>Support offline verification using published JWKS endpoints</li>
                <li>Cross-platform compatibility (any language, any system)</li>
            </ul>

            <h3 style="color: var(--primary); margin: 1.5rem 0 1rem 0;">Open Ecosystem Components</h3>
            <ul style="margin-bottom: 1rem;">
                <li><strong>Standard Libraries:</strong> Python, Go, Rust, JavaScript SDKs (MIT License)</li>
                <li><strong>Reference Implementation:</strong> Complete working API service</li>
                <li><strong>Test Vectors:</strong> <a href="/test-vectors" style="color: var(--primary);">Cryptographic compliance testing suite</a></li>
                <li><strong>Governance:</strong> <a href="/trust" style="color: var(--primary);">Open standards committee</a> for protocol evolution</li>
            </ul>

            <div style="background: linear-gradient(135deg, #f0fdf4 0%, #f7fee7 100%); border-left: 4px solid var(--verified-green); padding: 1rem; border-radius: 6px; margin: 1.5rem 0;">
                <h4 style="margin: 0 0 0.5rem 0; color: var(--verified-green);">ðŸš€ Join the Ecosystem</h4>
                <p style="margin: 0; color: var(--text);">Start with the managed service below for rapid prototyping, then implement the standard directly using open source libraries for production. The goal: every platform, every language, every use case can generate and verify CertNode receipts.</p>
            </div>
        </div>
    </div>

    <div id="content-api" style="max-width: 1200px; margin: 0 auto; padding: 0 2rem; display: none;">
        <div style="background: var(--panel); border-radius: 12px; border: 1px solid var(--border); padding: 2rem; margin-bottom: 2rem;">
            <h2 style="color: var(--primary); margin-bottom: 1rem;">Reference Implementation API</h2>
            <p style="margin-bottom: 1rem;">The following API provides a managed CertNode signing service for rapid prototyping and development. This reference implementation demonstrates the standard in action and allows you to start generating receipts immediately.</p>

            <div style="background: linear-gradient(135deg, #fff7ed 0%, #fef3c7 100%); border-left: 4px solid var(--warning-amber); padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                <h4 style="margin: 0 0 0.5rem 0; color: var(--warning-amber);">âš¡ For Production: Use Your Own Keys</h4>
                <p style="margin: 0; color: var(--text);">While this managed service is perfect for prototyping, production applications should implement the CertNode standard using the open source libraries to maintain full control over cryptographic keys and infrastructure.</p>
            </div>

            <p style="margin-bottom: 2rem;">Ready to implement your own? Check out the <strong><a href="#tab-overview" style="color: var(--primary);">Protocol Overview</a></strong> tab above for technical specifications, or visit our <strong><a href="https://github.com/certnode/certnode" style="color: var(--primary);">GitHub repository</a></strong> for open source libraries in Python, Go, Rust, and JavaScript.</p>
        </div>

        <div style="background: var(--panel); border-radius: 12px; border: 1px solid var(--border); padding: 1rem;">
            <div id="swagger-ui"></div>
        </div>
    </div>
    
    <script src="https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js"></script>
    <script>
        window.ui = SwaggerUIBundle({
            url: '/openapi.json',
            dom_id: '#swagger-ui',
            deepLinking: true,
            presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIBundle.presets.standalone
            ],
            plugins: [
                SwaggerUIBundle.plugins.DownloadUrl
            ],
            layout: "BaseLayout",
            defaultModelsExpandDepth: 2,
            defaultModelExpandDepth: 2,
            docExpansion: "list",
            filter: true,
            showRequestHeaders: true,
            showCommonExtensions: true,
            tryItOutEnabled: true
        });

        // Tab switching functionality - wait for DOM and Swagger UI to be ready
        window.addEventListener('load', function() {
            console.log('Window loaded, initializing tabs...');

            const tabOverview = document.getElementById('tab-overview');
            const tabApi = document.getElementById('tab-api');
            const contentOverview = document.getElementById('content-overview');
            const contentApi = document.getElementById('content-api');

            console.log('Tab elements found:', {
                tabOverview: !!tabOverview,
                tabApi: !!tabApi,
                contentOverview: !!contentOverview,
                contentApi: !!contentApi
            });

            function showOverview() {
                if (!tabOverview || !tabApi || !contentOverview || !contentApi) {
                    console.error('Tab elements not found!');
                    return;
                }
                tabOverview.style.background = 'var(--primary)';
                tabOverview.style.color = 'white';
                tabApi.style.background = 'var(--panel)';
                tabApi.style.color = 'var(--text-muted)';
                contentOverview.style.display = 'block';
                contentApi.style.display = 'none';
                console.log('Switched to overview tab');
            }

            function showApi() {
                if (!tabOverview || !tabApi || !contentOverview || !contentApi) {
                    console.error('Tab elements not found!');
                    return;
                }
                tabApi.style.background = 'var(--primary)';
                tabApi.style.color = 'white';
                tabOverview.style.background = 'var(--panel)';
                tabOverview.style.color = 'var(--text-muted)';
                contentOverview.style.display = 'none';
                contentApi.style.display = 'block';
                console.log('Switched to API tab');

                // Force Swagger UI to re-render when tab becomes visible
                if (window.ui) {
                    setTimeout(() => {
                        window.ui.getSystem().layoutActions.updateLayout("BaseLayout");
                    }, 100);
                }
            }

            if (tabOverview && tabApi) {
                tabOverview.addEventListener('click', showOverview);
                tabApi.addEventListener('click', showApi);
                // Show overview by default
                showOverview();
                console.log('API page tabs initialized successfully');
            } else {
                console.error('Failed to initialize tabs - elements not found');
            }
        });
    </script>
</body>
</html>
