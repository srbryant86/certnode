<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>CertNode API</title>
  <meta name="description" content="REST API for signing and verifying detached JWS receipts (ES256, RFC 8785 JCS)."/>
  <link rel="preconnect" href="https://cdn.jsdelivr.net"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@scalar/api-reference@1.25.54/dist/browser/standalone.min.css"/>
  <style>
    html,body,#root{height:100%} body{margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto}
    .head {padding:16px;border-bottom:1px solid #eee;display:flex;gap:16px;align-items:center;flex-wrap:wrap}
    .head a.btn{padding:8px 12px;border:1px solid #ddd;border-radius:8px;text-decoration:none}
    .examples{padding:12px 16px;border-top:1px solid #eee}
    code,pre{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;font-size:12.5px}
  </style>
</head>
<body>
  <div class="head">
    <strong>CertNode API</strong>
    <a class="btn" href="/openapi.json" download>Download OpenAPI (JSON)</a>
    <a class="btn" href="/assets/postman/certnode.postman_collection.json" download>Postman Collection</a>
    <a class="btn" href="/verify">Live Demo</a>
    <a class="btn" href="/.well-known/jwks.json">JWKS</a>
  </div>

  <div id="root" aria-label="Interactive API Reference"></div>

  <section class="examples">
    <details>
      <summary><strong>Copy-paste examples (curl & Node)</strong></summary>
      <p><em>JWKS</em></p>
      <pre><code>curl -s https://certnode.vercel.app/.well-known/jwks.json | jq .</code></pre>
      <p><em>Verify sample (server)</em></p>
      <pre><code>curl -s -X POST https://api.certnode.io/v1/verify \
  -H "content-type: application/json" \
  -d '{"receipt_ref":"/samples/receipt.json","jwks_ref":"/.well-known/jwks.json"}' | jq .</code></pre>
      <p><em>Node (client)</em></p>
      <pre><code>const r = await (await fetch('/samples/receipt.json')).json();
const k = await (await fetch('/.well-known/jwks.json')).json();
const p = await (await fetch('/samples/payload.json')).json();
// verifyDetachedJws({ receipt:r, jwks:k, payload:p })</code></pre>
    </details>
  </section>

  <noscript>
    <div style="padding:16px;color:#b00">
      JavaScript is disabled. You can still <a href="/openapi.json">download the OpenAPI JSON</a> and use the examples above.
    </div>
  </noscript>

  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference@1.25.54/dist/browser/standalone.min.js"></script>
  <script>
    // Mount Scalar (works offline with the JSON on same origin)
    ScalarAPIReference.render({
      spec: "/openapi.json",
      hideDownloadButton: false,
      hideTryIt: false,
      theme: "purple",
      layout: "modern"
    }, document.getElementById('root'));
  </script>
</body>
</html>